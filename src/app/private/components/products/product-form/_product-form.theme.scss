@use "sass:map";

@use "/src/scss/utility/utilities" as utils;

@mixin _layout($theme) {
  @include utils.make-flex($direction: "column", $gap: "20px", $alignItems: "space-between", $justContent: "center");
  padding: 20px;

  .main-title {
    @include utils.make-flex($justContent: "space-between", $alignItems: "center");
  }

  .mat-list-item, .mat-list-item-content {
    height: fit-content;
    width: 100%;

    .content-container {
      flex: 1 0;
    }
  }

  .content-section {
    @include utils.make-flex($gap: "20px", $wrap: "wrap", $alignContent: "stretch");

    & > .left-content {
      &,
      .card {
        height: 100%;
      }

      .products-list {
        margin: 0;
        margin-top: 1rem;;
        padding: 0;

        .product-wrapper {
          list-style: none;
        }
      }

      .product-item {
        @include utils.make-flex($direction: "column");

        .product-content-wrapper {
          @include utils.make-flex($gap: "20px");
          flex: 1 0;
          background-color: #303030;
          padding: 1rem;
          border-radius: .5rem;
          cursor: pointer;
        }

        .product-content-wrapper:hover,
        .product-content-wrapper.selected {
          background-color: #404040
        }

        .img-container {
          @include utils.make-square(100px);
        }

        .product-details {
          @include utils.make-flex($direction: "column");
          flex: 1 0;

          p {
            @include utils.make-flex($justContent: "space-between");
            margin: 0;
            padding: 0;
          }

          .product-title {
          }

          .product-pricing span {
          }
        }
      }
    }

    .middle-content {
      flex: 1 0;

      .editable form,
      .editable .form-fields {
        @include utils.make-flex($direction: "column");
      }

      .editable form {
        gap: 20px;
      }

      .editable .form-fields {
        gap: 20px;

        .top-content {
          @include utils.make-flex($gap: "20px");

          .left-content .img-container {
            position: relative;
            $measure: 20.5rem;
            width: auto;
            height: $measure;
            min-width: 200px;
            max-width: $measure;

            .select-file-btn {
              position: absolute;
              top: 1rem;
              right: 1rem;
              display: none;
            }

            &:hover .select-file-btn {
              display: block;
            }
          }

          .right-content {
            flex: 1 0;
            @include utils.make-flex($direction: "column", $justContent: "space-between", $alignItems: "stretch");

            .field {
              @include utils.make-flex($gap: "5px", $alignItems: "center");

              .p-dropdown-sm,
              .p-component:not(.p-button) {
                flex: 1 0;
              }

              .p-dropdown {
                width: 100%;
              }

              .p-button-sm {
                width: 30px!important;
                height: 30px!important;
                min-width: 30px!important;
              }
            }
          }
        }

        .p-inputtextarea {
          width: 100%;
        }
      }

      .editable .controls {
        @include utils.make-flex($justContent: "flex-end", $gap: "10px");
      }
    }

    & > .right-content {
      max-width: 30rem;
      height: 100%;
      flex: 1 0;

      .editable form {
        @include utils.make-flex($direction: "column", $alignItems: "center");

        .form-fields {
          @include utils.make-flex($direction: "column", $justContent: "stretch", $alignItems: "center", $gap: "20px");
          width: 100%;
        }

        .variants-list {
          padding: 0;

          .variant-wrapper {
            list-style: none;
            @include utils.make-flex($direction: "column", $gap: "5px");

            .fileds-container {
              @include utils.make-flex($gap: "20px", $alignItems: "center");

              .line {
                @include utils.make-flex($gap: "20px");

                .grow {
                  flex: 1 0;
                }

                .field.inputgroup {
                  @include utils.make-flex($alignItems: "center");

                  .inputgroup-addon {
                    border-bottom-left-radius: 4px;
                    border-top-left-radius: 4px;
                    min-width: 3rem;
                    height: 100%;
                    text-align: center;
                    background-color: #ccc;
                    padding: 0 10px;
                  }

                  .inputgroup-addon span {
                    display: inline-block;
                    transform: translateY(1rem);
                    color: #000;
                    font-weight: 600;
                  }

                  .colorpicker {
                    height: 100%;
                    width: 3rem;
                  }

                  .p-colorpicker input {
                    height: 100%;
                    width: 3rem;
                    border-bottom-left-radius: 0;
                    border-top-left-radius: 0;
                  }

                  .p-colorpicker-overlay-panel {
                    left: auto!important;
                    right: 0;
                  }

                  .p-inputnumber input {
                    border-top-left-radius: 0;
                    border-bottom-left-radius: 0;
                  }
                }
              }
            }

            .product-variant {
              @include utils.make-flex($direction: "column", $gap: "20px");
            }

            .p-button {
              width: 3rem;
              height: auto;
            }
          }
        }

        & > .controls {
          align-self: flex-end;
        }
      }
    }
  }
}

@mixin themefy($theme) {
  .app-public-products-form-module {
    @include _layout($theme);
  }
}
